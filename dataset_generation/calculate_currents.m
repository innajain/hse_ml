function [from_current_magnitudes, from_current_angles_deg, ...
          to_current_magnitudes, to_current_angles_deg] = ...
          calculate_currents(pf_result, measurements)
    
    % Calculate from bus currents
    from_branch_currents = conj(measurements.from_bus_p_injection' + ...
        measurements.from_bus_q_injection') ./ ...
        (conj(pf_result.bus(pf_result.branch(:, 1), 8) .* ...
        exp(1i*pf_result.bus(pf_result.branch(:, 1), 9))) * pf_result.baseMVA);
    
    from_current_magnitudes = abs(from_branch_currents)';
    from_current_angles_deg = (angle(from_branch_currents) * (180 / pi))';
    
    % Calculate to bus currents
    to_branch_currents = conj(measurements.to_bus_p_injection' + ...
        1i*measurements.to_bus_q_injection') ./ ...
        (conj(pf_result.bus(pf_result.branch(:, 2), 8) .* ...
        exp(1i*pf_result.bus(pf_result.branch(:, 2), 9))) * pf_result.baseMVA);
    to_current_magnitudes = abs(to_branch_currents)';
    disp(to_current_magnitudes);
    to_current_angles_deg = (angle(to_branch_currents) * (180 / pi))';
end